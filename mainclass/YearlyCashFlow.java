package cashflowcalculations;import java.util.ArrayList;import java.util.HashMap;import java.util.HashSet;import java.util.List;import java.util.Map;import java.util.Scanner;import java.util.Set;import cashflowcalculations.model.CashFlow;import cashflowcalculations.service.Calculate;import cashflowcalculations.serviceimpl.CalculateImpl;import cashflowcalculations.util.CommonUtil;import cashflowcalculations.util.Months;public class YearlyCashFlow {	static Map<String, Double> monthlyCashFlowMap = new HashMap<>();	static Map<String, Double> category = new HashMap<>();	public static void main(String[] args) {		Scanner scanner = new Scanner(System.in);		String name;		System.out.println(				"------------------------------Welcome to the Cash Flow Application------------------------------");		System.out.println("Please enter your name :");		name = scanner.next();		System.out.println("\t \t \t \t WELCOME " + name.toUpperCase());		System.out.println("FOLLOWING FEATURES ARE PROVIDED :-");		System.out.println("CAPTURE ALL INCOME SOURCE");		System.out.println("CAPTURE ALL EXPENDITURE SOURCE");		System.out.println("CALCULATE FINAL CASHFLOW FOR THE MONTH");		System.out.println("RECOMMEND THE EXPENDITURE SOURCE CAUSING NEGETIVE CASHFLOW");		System.out.println("\n");		cashFlowPerMonth();		displayCashFlowOutput(monthlyCashFlowMap, CommonUtil.findMaxOccurrenceInMapWithHighestValue(category));		System.out.println("\n");		System.out.println(				"------------------------------------------------------------------------------------------------");	}	private static void cashFlowPerMonth() {		Calculate cal = new CalculateImpl();		CashFlow cashFlow = null;		String month = getMonth();		if (CommonUtil.checkIfMonthExists(month, monthlyCashFlowMap)) {			System.out.println(					"The entered month is already existing, please try again for a new month of a calendar year... : ");			System.out.println("\n");			cashFlowPerMonth();		}		cashFlow = cal.calculateCashFlow();		monthlyCashFlowMap.put(month, cashFlow.getAmount());		category.put(cashFlow.getRecommendationDetails().getCategory(),				cashFlow.getRecommendationDetails().getAmount());		String optionToQuit = getInputForContinuation();		if (optionToQuit.equals("1")) {			cashFlowPerMonth();		}	}	private static String getInputForContinuation() {		Scanner scanner = new Scanner(System.in);		String optionToQuit;		System.out.println("If you want to add for another month please press 1 or press any key to exit : ");		optionToQuit = scanner.next();		return optionToQuit;	}	private static String getMonth() {		Scanner scanner = new Scanner(System.in);		System.out.println("Please enter the month for calculating cash flow $: ");		String month = scanner.next();		if (!(Months.findByName(month))) {			System.out.println("You have entered an incorrect month in a calendar year");			System.out.println("\n");			getMonth();		}		return month;	}	private static void displayCashFlowOutput(Map<String, Double> monthlyCashFlowMap, String recommendedCategory) {		System.out.println("------------------------------------CASH FLOW TABLE------------------------------------");		for (Map.Entry<String, Double> map : monthlyCashFlowMap.entrySet()) {			System.out.println("The Cashflow for the Month of " + map.getKey() + " is : " + map.getValue());		}		System.out.println(				"Overall we would recommend to work/reduce on " + recommendedCategory + " category expenditure");		System.out.println("------------------------------------XXXXXXXXXXXXXXX------------------------------------");	}	public String getCategory(String type) {		Scanner scanner = new Scanner(System.in);		System.out.println("Please enter the category of " + type);		return scanner.nextLine();	}	public String getOptionSelected(String category) {		Scanner scanner = new Scanner(System.in);		System.out.println("Do you want to add more " + category + " source, if yes please enter 1 or else 2");		return scanner.nextLine();	}	public double getAmount(String category, String type) {		double amount = 0;		try {			Scanner scanner = new Scanner(System.in);			System.out.println("Please enter the " + type + " for " + category + " : ");			amount = scanner.nextDouble();		} catch (Exception e) {			System.out.println("Entered value for " + type + " is incorrect, please try again... ");			getAmount(category, type);		}		return amount;	}}